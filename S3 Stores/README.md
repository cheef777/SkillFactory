Для работы микросервиса на рабочей станции должны быть установлены RabbitMQ и Python.
Так же должны быть установлены следующие фреймворки:
    • pika, для работы с брокером сообщений RabbitMQ, устанавливается командой          pip install pika из терминала или командной строки
    • json, для работы с данными в формате json, устанавливается командой pip install json из терминала или командной строки, в последних версиях Python идет в комплекте, поэтому установка данного фреймворка может не потребоваться
    • joblib, для работы с серелиазацией данных, устанавливается командой                       pip install joblib из терминала или командной строки
    • pandas, для работы с датафреймами, устанавливается командой pip install pandas из терминала или командной строки
    • torch, для работы с нейронными сетями, устанавливается командой pip3 install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/cu113 из терминала или командной строки
    • datasets, для работы с датасетами в формате pytorch, устанавливается командой pip install -U datasets из терминала или командной строки
    • sklearn, для работы с моделями машинного обучения(KNN), устанавливается командой pip install -U scikit-learn из терминала или командной строки
    • transformers, для работы с нейронными сетями семейства transformers, устанавливается командой pip install transformers из терминала или командной строки
При установке в системе Linux возможно надо будет вместо команды pip использовать pip3.

В скрипте микросервиса используются следующие установоночные константы:
    • для работы с брокером сообщений RabbitMQ:
1. LOGIN
логин для работы с RabbitMQ, тип строка
2. PASSWORD
пароль для работы с RabbitMQ, тип строка
3. HOST
хост для работы с RabbitMQ, в виде IP-адреса, тип строка
4. PORT
порт для работы с RabbitMQ, обычно равен 5672, тип целое число
5. VIRTUAL_HOST
виртуальный хост для работы с RabbitMQ, тип строка
6. QUEUE1
имя очереди для приема сообщений, тип строка
7. QUEUE2
имя очереди для отправки ответа, тип строка
8. PREFETCH_COUNT
ограничение на количество принимаемых сообщений без подтверждения, значение ноль означает бесконечное множество сообщений без ограничения, тип целое число
9. EXCHANGE1
имя обменника для приема сообщений, тип строка
10.EXCHANGE2
имя обменника для отправки ответа, тип строка
11. EXCHANGE_TYPE
тип обменника, тип строка


    • для работы с моделями
1. PRE_TRAINED_MODEL_NAME
имя предобученней модели трансформер, равно 'microsoft/deberta-large', тип строка
2. RANDOM_STATE
для установки значения генератора рандомайзера для воспроизводимости экмперимента(вычислений), тип целое число, обычно равно 42
3. MAX_LEN
максимальная длина входных данных для нейронной сети, тип целое число, при обучении моделей было использовано значение 400
4. output_model_dl_path
путь к файлу с нейронной сетью без названия файла, тип список строк
файлы должны называться pytorch_model.bin и config.json, для каждой модели лежать в своей папке, пути должны быть в том же порядке, что и список кодов моделей(см.ниже)
5.  output_model_dl_path
полный путь к моделям классификатора с именем файла, тип список строк
должны идти в том же порядке как и модели нейронных сетей в списке моделей нейронных сетей
6. unique_labels_path
полный путь к меткам моделей с именем файла, тип список строк
тоже самое что и для моделей классификатора

прописывать путь лучше через «/», так как некоторые символы могут быть восприняты системой, как служебные

7. list_code
список кодов моделей, тип список строк
порядок вхождения в список должен соответствовать спискам нейронных сетей, моделей классификатора и списка меток

Микросервис должен получать сообщения в json формате в виде
{‘code’: code, ‘Product name’: product, ‘Product description’: description}
где:
    • code – условный код(название) модели, тип строка, эти коды вносят в list_code
    • product – имя продукта, тип строка
    • dedcription – описание продукта, тип строка

Микросервис отдает ответ в том же формате, добавляя поле categorise, которое содержит искомую категоризацию.

Микросервис не содержит в себе функцию защиты от дурака!!!
Все данные должны поступать в строго оговоренном виде, продюсер не должен закрывать канал, иначе микросервис прекратит работу с ошибкой закрытия канала!

Микросервис загружает все нужные модели сразу! Рабочая станция должна иметь соответсвующий размер памяти!!! на каждую модель до 2ГБ!!!

Микросервис может работать и без подключения видеокарты, но время на обработку сообщений многократно увеличивается!!!
